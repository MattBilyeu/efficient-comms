"use strict";(self.webpackChunkangular_frontend=self.webpackChunkangular_frontend||[]).push([[159],{8358:(Q,_,c)=>{c.r(_),c.d(_,{AdminModule:()=>Y});var l=c(6814),g=c(5763),e=c(9291);const v=[];let T=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(v),g.Bz]})}return i})();var d=c(2848),p=c(1269),s=c(95);function f(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"h1"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.alert)}}function Z(i,o){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function h(i,o){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function A(i,o){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function U(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h1"),e._uU(2,"Need to delete a team?"),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.activateDelete())}),e._uU(4,"Activate Delete Form"),e.qZA()()}}function b(i,o){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",2,22),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(1),r=e.oxw();return e.KtG(r.deleteTeam(a))}),e.TgZ(2,"div",4)(3,"label",16),e._uU(4,"Team: "),e.qZA(),e.TgZ(5,"select",9),e.YNc(6,b,2,2,"option",10),e.qZA()(),e.TgZ(7,"button",7),e._uU(8,"Delete Team"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.teams)}}let C=(()=>{class i{constructor(t,n){this.dataService=t,this.httpService=n,this.deleteActive=!1}ngOnInit(){this.teams=this.dataService.adminTeamOb,this.dataService.adminTeamOb.forEach(t=>{this.users=this.users.concat(t.users)})}updateComponent(){this.httpService.getAllTeams().subscribe(t=>{"message"in t?this.alert=t.message:(this.dataService.adminTeamOb=t,this.alert=void 0)}),this.teams=this.dataService.adminTeamOb,this.dataService.adminTeamOb.forEach(t=>{this.users=this.users.concat(t.users)})}createTeam(t){this.httpService.createTeam(t.value.name).subscribe(n=>{this.updateComponent(),this.alert=n.message})}updateTeamName(t){this.httpService.updateTeamName(t.value.name,t.value.teamId)}reassignMembers(t){const n=t.value.teamId,a=t.value.userId,r=this.users.filter(m=>m._Id===a).map(m=>m.teamId)[0];this.httpService.reassignMembers(n,r,a).subscribe(m=>{this.updateComponent(),this.alert=m.message})}activateDelete(){this.deleteActive=!0}deleteTeam(t){prompt("Are you sure you want to delete this team?  This is a destructive and irreversable action.")&&this.httpService.deleteTeam(t.value.teamId).subscribe(a=>{this.updateComponent(),this.alert=a.message})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.D),e.Y36(p.O))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-team"]],decls:36,vars:6,consts:[["class","alert",4,"ngIf"],[1,"container"],[3,"ngSubmit"],["f","ngForm"],[1,"group"],["for","name"],["type","text","id","name","name","name","ngModel","","required",""],["type","submit"],["u","ngForm"],["name","teamId","id","teamId","ngModel","","required",""],[3,"value",4,"ngFor","ngForOf"],["for","newName"],["type","text","id","newName","name","newName","ngModel","","required",""],["r","ngForm"],["for","userId"],["name","userId","id","userId","ngModel","","required",""],["for","teamId"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"alert"],[3,"value"],[3,"click"],["d","ngForm"]],template:function(n,a){if(1&n){const r=e.EpF();e.YNc(0,f,3,1,"div",0),e.TgZ(1,"div",1)(2,"form",2,3),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(3);return e.KtG(a.createTeam(u))}),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Create Team: "),e.qZA(),e._UZ(7,"input",6),e.qZA(),e.TgZ(8,"button",7),e._uU(9,"Create Team"),e.qZA()(),e.TgZ(10,"form",2,8),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(11);return e.KtG(a.updateTeamName(u))}),e.TgZ(12,"div",4)(13,"select",9),e.YNc(14,Z,2,2,"option",10),e.qZA(),e.TgZ(15,"div")(16,"label",11),e._uU(17,"New Name:"),e.qZA(),e._UZ(18,"input",12),e.qZA()(),e.TgZ(19,"button",7),e._uU(20,"Update Team Name"),e.qZA()(),e.TgZ(21,"form",2,13),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(22);return e.KtG(a.reassignMembers(u))}),e.TgZ(23,"div",4)(24,"div")(25,"label",14),e._uU(26,"User:"),e.qZA(),e.TgZ(27,"select",15),e.YNc(28,h,2,2,"option",10),e.qZA()(),e.TgZ(29,"div")(30,"label",16),e._uU(31,"Team:"),e.qZA(),e.TgZ(32,"select",9),e.YNc(33,A,2,2,"option",10),e.qZA()()()(),e.YNc(34,U,5,0,"div",17),e.YNc(35,q,9,1,"form",18),e.qZA()}2&n&&(e.Q6J("ngIf",a.alert),e.xp6(14),e.Q6J("ngForOf",a.teams),e.xp6(14),e.Q6J("ngForOf",a.users),e.xp6(5),e.Q6J("ngForOf",a.teams),e.xp6(1),e.Q6J("ngIf",!a.deleteActive),e.xp6(1),e.Q6J("ngIf",a.deleteActive))},dependencies:[l.sg,l.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F]})}return i})();class I{constructor(o,t,n,a,r){this.name=o,this.email=t,this.role=n,this.teamId=a,this.password="redacted",this.peerReviewer=r}}function S(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function J(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h1"),e._uU(2,"Need to delete a team?"),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.activateDelete())}),e._uU(4,"Activate Delete Form"),e.qZA()()}}function O(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t._Id),e.xp6(1),e.Oqu(t.name)}}function N(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1,26),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(1),r=e.oxw();return e.KtG(r.deleteUser(a))}),e.TgZ(2,"div",3)(3,"label",27),e._uU(4,"User: "),e.qZA(),e.TgZ(5,"select",28),e.YNc(6,O,2,2,"option",15),e.qZA()(),e.TgZ(7,"button",16),e._uU(8,"Delete Team"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.users)}}let F=(()=>{class i{constructor(t,n){this.dataService=t,this.httpService=n,this.deleteActive=!1}ngOnInit(){this.teams=this.dataService.adminTeamOb,this.dataService.adminTeamOb.forEach(t=>{this.users=this.users.concat(t.users)})}updateComponent(){this.httpService.getAllTeams().subscribe(t=>{"message"in t?this.alert=t.message:(this.dataService.adminTeamOb=t,this.teams=this.dataService.adminTeamOb,this.dataService.adminTeamOb.forEach(n=>{this.users=this.users.concat(n.users)}))})}activateDelete(){this.deleteActive=!0}createUser(t){if("Admin"===t.value.role&&"Admin"!==t.value.teamId)this.alert="Admins must be assigned to the Admin team";else{const n=new I(t.value.name,t.value.email,t.value.role,t.value.teamId,!1);this.httpService.createUser(n).subscribe(a=>{this.alert=a.message,"User created."===a.message&&this.updateComponent()})}}updateUser(t){this.httpService.updateuser(t.value.name,t.value.email,t.value.peerReviewer,t.value.role).subscribe(u=>{this.alert=u.message,"User updated."===u.message&&this.updateComponent()})}deleteUser(t){prompt("Are you sure you want to delete this user?  This is a destructive and irreversable action.")&&this.httpService.deleteUser(t.value.id).subscribe(a=>{this.alert=a.message,"User deleted."===a.message&&this.updateComponent()})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.D),e.Y36(p.O))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-user"]],decls:62,vars:3,consts:[[1,"container"],[3,"ngSubmit"],["c","ngForm"],[1,"group"],["for","name"],["type","text","id","name","name","name","ngModel","","required",""],["for","email"],["type","email","id","email","name","email","ngModel","","required",""],["for","role"],["name","role","id","role","ngModel","","required",""],["value","Admin"],["value","Manager"],["value","User"],["for","teamId"],["name","teamId","id","teamId","ngModel","","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit"],["u","ngForm"],["for","peerReviewer"],["name","peerReviewer","id","peerReviewer","ngModel","","required",""],["value","true"],["value","false"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[3,"value"],[3,"click"],["d","ngForm"],["for","userId"],["name","userId","id","userId","ngModel","","required",""]],template:function(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(2);return e.KtG(a.createUser(u))}),e.TgZ(3,"div",3)(4,"label",4),e._uU(5,"Name: "),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"Email: "),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",3)(12,"label",8),e._uU(13,"Role: "),e.qZA(),e.TgZ(14,"select",9)(15,"option",10),e._uU(16,"Admin"),e.qZA(),e.TgZ(17,"option",11),e._uU(18,"Manager"),e.qZA(),e.TgZ(19,"option",12),e._uU(20,"User"),e.qZA()()(),e.TgZ(21,"div",3)(22,"label",13),e._uU(23,"Team: "),e.qZA(),e.TgZ(24,"select",14),e.YNc(25,S,2,2,"option",15),e.TgZ(26,"option",10),e._uU(27,"Admin"),e.qZA()()(),e.TgZ(28,"button",16),e._uU(29,"Create User"),e.qZA()(),e.TgZ(30,"form",1,17),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(31);return e.KtG(a.updateUser(u))}),e.TgZ(32,"div",3)(33,"label",4),e._uU(34,"Name: "),e.qZA(),e._UZ(35,"input",5),e.qZA(),e.TgZ(36,"div",3)(37,"label",6),e._uU(38,"Email: "),e.qZA(),e._UZ(39,"input",7),e.qZA(),e.TgZ(40,"div",3)(41,"label",8),e._uU(42,"Role: "),e.qZA(),e.TgZ(43,"select",9)(44,"option",10),e._uU(45,"Admin"),e.qZA(),e.TgZ(46,"option",11),e._uU(47,"Manager"),e.qZA(),e.TgZ(48,"option",12),e._uU(49,"User"),e.qZA()()(),e.TgZ(50,"div",3)(51,"label",18),e._uU(52,"Peer Reviewer: "),e.qZA(),e.TgZ(53,"select",19)(54,"option",20),e._uU(55,"True"),e.qZA(),e.TgZ(56,"option",21),e._uU(57,"False"),e.qZA()()(),e.TgZ(58,"button",16),e._uU(59,"Update User"),e.qZA()(),e.YNc(60,J,5,0,"div",22),e.YNc(61,N,9,1,"form",23),e.qZA()}2&n&&(e.xp6(25),e.Q6J("ngForOf",a.teams),e.xp6(35),e.Q6J("ngIf",!a.deleteActive),e.xp6(1),e.Q6J("ngIf",a.deleteActive))},dependencies:[l.sg,l.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F]})}return i})();function M(i,o){if(1&i&&(e.TgZ(0,"div",2)(1,"h1"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.alert)}}function x(i,o){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-team")(2,"app-user"),e.qZA())}let w=(()=>{class i{constructor(t,n){this.dataService=t,this.httpService=n,this.alert="Loading"}ngOnInit(){this.httpService.getAllTeams().subscribe(t=>{"message"in t?this.alert=t.message:(this.dataService.adminTeamOb=t,this.alert=void 0)})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.D),e.Y36(p.O))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin"]],decls:2,vars:2,consts:[["class","alert",4,"ngIf"],[4,"ngIf"],[1,"alert"]],template:function(n,a){1&n&&(e.YNc(0,M,3,1,"div",0),e.YNc(1,x,3,0,"div",1)),2&n&&(e.Q6J("ngIf",a.alert),e.xp6(1),e.Q6J("ngIf",!a.alert))},dependencies:[l.O5,C,F]})}return i})(),Y=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i,bootstrap:[w]});static#i=this.\u0275inj=e.cJS({imports:[l.ez,T,s.u5]})}return i})()}}]);